<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from src/sim_models/models/robots/w3_600b/urdf/w3_600b.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="w3_600b">
  <coppelia_file filename="/home/gilmar/sim/sim_ws/install/sim_models/share/sim_models/models/robots/w3_600b/files/CoppeliaSim/w3_600b.ttm"/>
  <!-- <xacro:property name="caster_support_z_offset" value="0"/>

  <xacro:property name="caster_wheel_x_offset" value="0"/>
  <xacro:property name="caster_wheel_y_offset" value="0"/>
  <xacro:property name="caster_wheel_z_offset" value="0"/> -->
  <!-- botão vermelho -->
  <!-- Material definitions -->
  <material name="blue_body">
    <color rgba="0.2 0.6 0.8 1.0"/>
  </material>
  <material name="dark_gray">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="top_gray">
    <color rgba="0.6 0.6 0.6 1.0"/>
  </material>
  <material name="led_cyan">
    <color rgba="0.0 1.0 1.0 1.0"/>
  </material>
  <material name="led_pink">
    <color rgba="1.0 0.4 0.8 1.0"/>
  </material>
  <material name="button_green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="button_red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
  <material name="silver">
    <color rgba="0.700 0.700 0.700 1.000"/>
  </material>
  <!-- STRUCTURE -->
  <link name="world_link"/>
  <link name="base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.001608 0.058048 -0.000259"/>
      <mass value="69.363439"/>
      <inertia ixx="3.742" ixy="-0.001876" ixz="0.001144" iyx="-0.001876" iyy="9.426" iyz="0.0002847" izx="0.001144" izy="0.0002847" izz="6.169"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/base_link_v2_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="blue_body"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="base_link">
    <material value="Gazebo/SkyBlue"/>
  </gazebo>
  <joint name="base_to_world" type="fixed">
    <parent link="world_link"/>
    <child link="base_link"/>
    <origin rpy="1.57 0 0" xyz="0 0 0"/>
  </joint>
  <!-- BACK RIGHT CASTER -->
  <link name="caster_wheel_br_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648186"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_6641_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_br_1">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_wheel_br_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648234"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_7274_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_br_2">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_support_br">
    <inertial>
      <origin rpy="0 0 0" xyz="0.018014271 0.051245800 0.000070723"/>
      <mass value="1.304324"/>
      <inertia ixx="141.765056" ixy="-15.302794" ixz="0.211610422" iyy="172.001216" iyz="0.60176325" izz="146.500608"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/BREP_WITH_VOIDS_6008_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="${-caster_support_x_offset} ${-caster_support_y_offset} 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/BREP_WITH_VOIDS_6008.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="caster_support_br">
    <material value="Gazebo/Grey"/>
  </gazebo>
  <joint name="caster_support_br_joint" type="continuous">
    <parent link="base_link"/>
    <child link="caster_support_br"/>
    <origin rpy="0 0 0" xyz="-0.289 0.0816 0.248"/>
    <axis xyz="0 1 0"/>
  </joint>
  <!-- 1 wheel -->
  <joint name="caster_wheel_br_1_joint" type="continuous">
    <parent link="caster_support_br"/>
    <child link="caster_wheel_br_1"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- 2 wheel -->
  <joint name="caster_wheel_br_2_joint" type="continuous">
    <parent link="caster_support_br"/>
    <child link="caster_wheel_br_2"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- BACK RIGHT CASTER -->
  <link name="caster_wheel_bl_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648186"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_6641_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_bl_1">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_wheel_bl_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648234"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_7274_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_bl_2">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_support_bl">
    <inertial>
      <origin rpy="0 0 0" xyz="0.018014271 0.051245800 0.000070723"/>
      <mass value="1.304324"/>
      <inertia ixx="141.765056" ixy="-15.302794" ixz="0.211610422" iyy="172.001216" iyz="0.60176325" izz="146.500608"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/BREP_WITH_VOIDS_6008_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="${-caster_support_x_offset} ${-caster_support_y_offset} 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/BREP_WITH_VOIDS_6008.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="caster_support_bl">
    <material value="Gazebo/Grey"/>
  </gazebo>
  <joint name="caster_support_bl_joint" type="continuous">
    <parent link="base_link"/>
    <child link="caster_support_bl"/>
    <origin rpy="0 0 0" xyz="-0.289 0.0816 -0.24800000000000003"/>
    <axis xyz="0 1 0"/>
  </joint>
  <!-- 1 wheel -->
  <joint name="caster_wheel_bl_1_joint" type="continuous">
    <parent link="caster_support_bl"/>
    <child link="caster_wheel_bl_1"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- 2 wheel -->
  <joint name="caster_wheel_bl_2_joint" type="continuous">
    <parent link="caster_support_bl"/>
    <child link="caster_wheel_bl_2"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- BACK RIGHT CASTER -->
  <link name="caster_wheel_fr_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648186"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_6641_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_fr_1">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_wheel_fr_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648234"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_7274_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_fr_2">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_support_fr">
    <inertial>
      <origin rpy="0 0 0" xyz="0.018014271 0.051245800 0.000070723"/>
      <mass value="1.304324"/>
      <inertia ixx="141.765056" ixy="-15.302794" ixz="0.211610422" iyy="172.001216" iyz="0.60176325" izz="146.500608"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/BREP_WITH_VOIDS_6008_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="${-caster_support_x_offset} ${-caster_support_y_offset} 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/BREP_WITH_VOIDS_6008.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="caster_support_fr">
    <material value="Gazebo/Grey"/>
  </gazebo>
  <joint name="caster_support_fr_joint" type="continuous">
    <parent link="base_link"/>
    <child link="caster_support_fr"/>
    <origin rpy="0 0 0" xyz="0.335 0.0816 0.177"/>
    <axis xyz="0 1 0"/>
  </joint>
  <!-- 1 wheel -->
  <joint name="caster_wheel_fr_1_joint" type="continuous">
    <parent link="caster_support_fr"/>
    <child link="caster_wheel_fr_1"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- 2 wheel -->
  <joint name="caster_wheel_fr_2_joint" type="continuous">
    <parent link="caster_support_fr"/>
    <child link="caster_wheel_fr_2"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- BACK RIGHT CASTER -->
  <link name="caster_wheel_fl_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648186"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_6641_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_fl_1">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_wheel_fl_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.013679895"/>
      <mass value="0.648234"/>
      <inertia ixx="32.110336" ixy="-0.000001493513" ixz="-0.000011677849" iyy="32.098568" iyz="0.000000016651" izz="57.71662"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/MANIFOLD_SOLID_BREP_7274_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.013065"/>
      <geometry>
        <cylinder length="0.02413" radius="0.0381"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="caster_wheel_fl_2">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <link name="caster_support_fl">
    <inertial>
      <origin rpy="0 0 0" xyz="0.018014271 0.051245800 0.000070723"/>
      <mass value="1.304324"/>
      <inertia ixx="141.765056" ixy="-15.302794" ixz="0.211610422" iyy="172.001216" iyz="0.60176325" izz="146.500608"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/BREP_WITH_VOIDS_6008_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="${-caster_support_x_offset} ${-caster_support_y_offset} 0" rpy="0 0 0"/>
                <geometry>
                    <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/BREP_WITH_VOIDS_6008.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="caster_support_fl">
    <material value="Gazebo/Grey"/>
  </gazebo>
  <joint name="caster_support_fl_joint" type="continuous">
    <parent link="base_link"/>
    <child link="caster_support_fl"/>
    <origin rpy="0 0 0" xyz="0.335 0.0816 -0.17700000000000002"/>
    <axis xyz="0 1 0"/>
  </joint>
  <!-- 1 wheel -->
  <joint name="caster_wheel_fl_1_joint" type="continuous">
    <parent link="caster_support_fl"/>
    <child link="caster_wheel_fl_1"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- 2 wheel -->
  <joint name="caster_wheel_fl_2_joint" type="continuous">
    <parent link="caster_support_fl"/>
    <child link="caster_wheel_fl_2"/>
    <origin rpy="0 0 0" xyz="-0.02 -0.0685 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="down_camera">
    <!-- <inertial>
                <origin xyz="${x} ${y} ${z}" rpy="0 0 0"/>
                <mass value="1.384936"/>
                <inertia ixx="0.00104" ixy="-7.659E-17" ixz="-0.000000000000008721" iyx="-7.659E-17" iyy="0.001219" iyz="-0.000010728685" izx="-0.000000000000008721" izy="-0.000010728685" izz="0.0005682"/>
            </inertial> -->
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/downward_camera_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/bottom_camera.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="down_camera">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <joint name="down_camera_mesh_joint" type="fixed">
    <parent link="base_link"/>
    <child link="down_camera"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <link name="down_camera_link">
        </link>
  <joint name="down_camera_joint" type="fixed">
    <parent link="base_link"/>
    <child link="down_camera_link"/>
    <origin rpy="0 0 -1.57" xyz="0 0.05 0"/>
  </joint>
  <gazebo reference="down_camera_link">
    <sensor name="down_rgb" type="camera">
      <pose> 0 0 0 0 0 0 </pose>
      <visualize>false</visualize>
      <update_rate>5</update_rate>
      <camera>
        <horizontal_fov>1.047198</horizontal_fov>
        <!-- 60 degrees -->
        <vertical_fov>1.047198</vertical_fov>
        <!-- 60 degrees -->
        <image>
          <format>B8G8R8</format>
          <width>128</width>
          <height>128</height>
        </image>
        <clip>
          <near>0.028</near>
          <far>0.15</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="down_rgb">
        <ros>
          <namespace>/r2d2/cam</namespace>
        </ros>
        <frame_name>down_camera_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <link name="up_camera">
    <!-- <inertial>
                <origin xyz="${x} ${y} ${z}" rpy="0 0 0"/>
                <mass value="1.384936"/>
                <inertia ixx="0.00104" ixy="-7.659E-17" ixz="-0.000000000000008721" iyx="-7.659E-17" iyy="0.001219" iyz="-0.000010728685" izx="-0.000000000000008721" izy="-0.000010728685" izz="0.0005682"/>
            </inertial> -->
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/upward_camera_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/bottom_camera.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="up_camera">
    <material value="Gazebo/Orange"/>
  </gazebo>
  <joint name="up_camera_mesh_joint" type="fixed">
    <parent link="base_link"/>
    <child link="up_camera"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <link name="up_camera_link">
        </link>
  <joint name="up_camera_joint" type="fixed">
    <parent link="base_link"/>
    <child link="up_camera_link"/>
    <origin rpy="3.14 0 1.57" xyz="0 0.175 0"/>
  </joint>
  <gazebo reference="up_camera_link">
    <sensor name="up_rgb" type="camera">
      <pose> 0 0 0 0 0 0 </pose>
      <visualize>false</visualize>
      <update_rate>5</update_rate>
      <camera>
        <horizontal_fov>1.047198</horizontal_fov>
        <!-- 60 degrees -->
        <vertical_fov>1.047198</vertical_fov>
        <!-- 60 degrees -->
        <image>
          <format>B8G8R8</format>
          <width>128</width>
          <height>128</height>
        </image>
        <clip>
          <near>0.028</near>
          <far>0.15</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="up_rgb">
        <ros>
          <namespace>/r2d2/cam</namespace>
        </ros>
        <frame_name>up_camera_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <link name="front_lidar">
    <!-- <inertial>
                <origin xyz="0.423797 0.139017 0.011563" rpy="0 0 0"/>
                <mass value="0.569677"/>
                <inertia ixx="0.0009071" ixy="0.000000243534" ixz="0.000014337829" iyx="0.000000243534" iyy="0.0008086" iyz="0.000074824692" izx="0.000014337829" izy="0.000074824692" izz="0.0005095"/>
            </inertial> -->
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/back_lidar_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <material name="silver"/>
                <geometry>
                    <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/${name}_lidar.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="front_lidar">
    <material value="Gazebo/DarkGrey"/>
  </gazebo>
  <joint name="front_lidar_mesh_joint" type="fixed">
    <parent link="base_link"/>
    <child link="front_lidar"/>
    <origin rpy="0 3.14 0" xyz="0 0 0"/>
  </joint>
  <link name="front_lidar_link">
        </link>
  <joint name="front_lidar_joint" type="fixed">
    <parent link="base_link"/>
    <child link="front_lidar_link"/>
    <origin rpy="-1.57 -1.57 0" xyz="0.424631 0.1765 0"/>
  </joint>
  <gazebo reference="front_lidar_link">
    <!-- <material value="Gazebo/Yellow" /> -->
    <!-- <material value="Gazebo/FlatBlack" /> -->
    <sensor name="front" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <!-- <visualize>true</visualize> -->
      <update_rate>30</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>1800</samples>
            <resolution>1</resolution>
            <!-- has to be 1; actual resolution will be computed from number of samples + min_angle/max_angle -->
            <min_angle>0</min_angle>
            <max_angle>3.1415</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.1</min>
          <max>40.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <!-- Noise parameters based on published spec for S300 achieving
                            "+-29mm" accuracy at range < 3m (~0.01 of the range) at
                            1 sigma. -->
          <mean>0.0</mean>
          <stddev>0.03</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="front">
        <ros>
          <namespace>/r2d2/lidar</namespace>
          <remapping>front/out:=front/scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>front_lidar_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <link name="back_lidar">
    <!-- <inertial>
                <origin xyz="0.423797 0.139017 0.011563" rpy="0 0 0"/>
                <mass value="0.569677"/>
                <inertia ixx="0.0009071" ixy="0.000000243534" ixz="0.000014337829" iyx="0.000000243534" iyy="0.0008086" iyz="0.000074824692" izx="0.000014337829" izy="0.000074824692" izz="0.0005095"/>
            </inertial> -->
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/back_lidar_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>
    <!-- <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <material name="silver"/>
                <geometry>
                    <mesh filename="package://sim_models/models/${model_class}/${model}/meshes/${name}_lidar.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision> -->
  </link>
  <gazebo reference="back_lidar">
    <material value="Gazebo/DarkGrey"/>
  </gazebo>
  <joint name="back_lidar_mesh_joint" type="fixed">
    <parent link="base_link"/>
    <child link="back_lidar"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <link name="back_lidar_link">
        </link>
  <joint name="back_lidar_joint" type="fixed">
    <parent link="base_link"/>
    <child link="back_lidar_link"/>
    <origin rpy="-1.57 1.57 0" xyz="-0.424631 0.1765 0"/>
  </joint>
  <gazebo reference="back_lidar_link">
    <!-- <material value="Gazebo/Yellow" /> -->
    <!-- <material value="Gazebo/FlatBlack" /> -->
    <sensor name="back" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <!-- <visualize>true</visualize> -->
      <update_rate>30</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>1800</samples>
            <resolution>1</resolution>
            <!-- has to be 1; actual resolution will be computed from number of samples + min_angle/max_angle -->
            <min_angle>0</min_angle>
            <max_angle>3.1415</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.1</min>
          <max>40.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <!-- Noise parameters based on published spec for S300 achieving
                            "+-29mm" accuracy at range < 3m (~0.01 of the range) at
                            1 sigma. -->
          <mean>0.0</mean>
          <stddev>0.03</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="back">
        <ros>
          <namespace>/r2d2/lidar</namespace>
          <remapping>back/out:=back/scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>back_lidar_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <link name="imu_link">
    <inertial>
      <mass value="0.01"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="1e-6" ixy="0.0" ixz="0.0" iyy="1e-6" iyz="0.0" izz="1e-6"/>
    </inertial>
  </link>
  <!-- Junta fixa do IMU ao corpo -->
  <joint name="imu_joint" type="continuous">
    <parent link="base_link"/>
    <child link="imu_link"/>
    <origin rpy="-1.57 0 0" xyz="0.3259 0.17 0.18194"/>
    <!-- posição relativa -->
  </joint>
  <gazebo reference="imu_link">
    <sensor name="imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <!-- <visualize>true</visualize> -->
    </sensor>
  </gazebo>
  <link name="left_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.000216 0.057568 -0.271782"/>
      <mass value="9.185826"/>
      <inertia ixx="0.02957" ixy="-0.000044741546" ixz="0.0001326" iyx="-0.000044741546" iyy="0.03102" iyz="0.000007781675" izx="0.0001326" izy="0.000007781675" izz="0.02782"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.147197"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/left_wheel_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.023"/>
      <geometry>
        <cylinder length="0.046" radius="0.0825"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_wheel">
    <material value="Gazebo/DarkGrey"/>
  </gazebo>
  <joint name="left_wheel_joint" type="revolute">
    <parent link="base_link"/>
    <child link="left_wheel"/>
    <origin rpy="0 0 0" xyz="0 0.0575 -0.27875"/>
    <limit effort="22" lower="-6.28" upper="6.28" velocity="219.8"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="right_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="0.000216 0.057568 0.271782"/>
      <mass value="9.185826"/>
      <inertia ixx="0.02957" ixy="0.000044741546" ixz="0.0001326" iyx="0.000044741546" iyy="0.03102" iyz="-0.000007781675" izx="0.0001326" izy="-0.000007781675" izz="0.02782"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.147197"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/right_wheel_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.023"/>
      <geometry>
        <cylinder length="0.046" radius="0.0825"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_wheel">
    <material value="Gazebo/DarkGrey"/>
  </gazebo>
  <joint name="right_wheel_joint" type="revolute">
    <parent link="base_link"/>
    <child link="right_wheel"/>
    <origin rpy="0 3.14 0" xyz="0 0.0575 0.27875"/>
    <limit effort="22" lower="-6.28" upper="6.28" velocity="219.8"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="tray">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="58.666118"/>
      <inertia ixx="2.038" ixy="0.000005613643" ixz="-0.000000000000003583" iyx="0.000005613643" iyy="5.914" iyz="-0.00000000000002564" izx="-0.000000000000003583" izy="-0.00000000000002564" izz="3.878"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 -0.218468 0"/>
      <geometry>
        <mesh filename="package://sim_models/models/robots/w3_600b/meshes/tray_simp.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="top_gray"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.924 0.014 0.650"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="tray">
    <material value="Gazebo/DarkGrey"/>
  </gazebo>
  <link name="rotating_base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="58.666118"/>
      <inertia ixx="2.038" ixy="0.000005613643" ixz="-0.000000000000003583" iyx="0.000005613643" iyy="5.914" iyz="-0.00000000000002564" izx="-0.000000000000003583" izy="-0.00000000000002564" izz="3.878"/>
    </inertial>
  </link>
  <joint name="tray_revolute_joint" type="revolute">
    <parent link="base_link"/>
    <child link="rotating_base_link"/>
    <origin rpy="0 0 0" xyz="0 0.218468 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="5886" lower="-6.28" upper="6.28" velocity="5.233333333333334"/>
    <dynamics damping="0.5" friction="0.1"/>
  </joint>
  <joint name="tray_prismatic_joint" type="prismatic">
    <parent link="rotating_base_link"/>
    <child link="tray"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="5886" lower="0" upper="0.06" velocity="0.013"/>
  </joint>
  <!-- CONTROL -->
  <ros2_control name="GazeboSystem" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
    </hardware>
    <joint name="left_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
    <joint name="tray_revolute_joint">
      <command_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
    <joint name="tray_prismatic_joint">
      <command_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
    <sensor name="imu_sensor">
      <state_interface name="orientation.x"/>
      <state_interface name="orientation.y"/>
      <state_interface name="orientation.z"/>
      <state_interface name="orientation.w"/>
      <state_interface name="angular_velocity.x"/>
      <state_interface name="angular_velocity.y"/>
      <state_interface name="angular_velocity.z"/>
      <state_interface name="linear_acceleration.x"/>
      <state_interface name="linear_acceleration.y"/>
      <state_interface name="linear_acceleration.z"/>
    </sensor>
  </ros2_control>
  <gazebo>
    <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">
      <ros>
        <namespace>r2d2</namespace>
        <!-- <remapping>/$(arg model_name)/joint_states:=encoders/joint_states</remapping>
        <remapping>/$(arg model_name)/dynamic_joint_states:=encoders/dynamic_joint_states</remapping> -->
      </ros>
      <parameters>/home/gilmar/sim/sim_ws/install/sim_models/share/sim_models/models/robots/w3_600b/config/w3_600b_controllers.yaml</parameters>
    </plugin>
  </gazebo>
</robot>
